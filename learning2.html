<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script src="http://documentcloud.github.com/underscore/underscore-min.js">
</script>
<script src="http://documentcloud.github.com/backbone/backbone-min.js">
</script>
<script>

//*****
	var ChangeVar = Backbone.Model.extend({
		// default values
	defaults: {
			title:'',
			completed: false
		},
		initialize: function(){
			console.log('This model has been initialized');
			this.on('change:title', function(){
			console.log('The title attribute has changed');
			});
		},
		setTitle: function(newtitle){
			this.set({title : newtitle});
		}
	});

	var changeme = new ChangeVar();	
	//Both the below statments are same
	changeme.set({ title:'change'});
	//changeme.set({'title','change'});
	changeme.setTitle('Go fishing');

	// the model does not trigger the event as we are not watching completed attribute.
	changeme.set({completed:true});
	
//*****
var firstView = Backbone.View.extend({
	tagName : 'li',
	className:'footer',
	id : 'todos',

	//define a template for the View
	todoTpl: _.template("An example view"),

	//events for the View
	events :{ 
		'dblclick label': 'edit',
		'keypress .edit' : 'updateOnEnter',
		'blur .edit' : 'close'
	},

	//Render function
	render : function() {
		this.$el.html( this.todoTpl( this.model.toJSON() ));
		this.input = this.$('.edit');
		return this;
	},

	edit : function(){

	},

	updateOnEnter : function(){


	},

	close : function(){

	}
}); 

	var newtodoView = new firstView();
	console.log(newtodoView.el);


	//set to an already existing on the page
	var todosView = new todosView({el:$('#footer')});

	var ListView = Backbone.View.extend({
		render : function(){
		this.$el.html(this.model.toJSON());
		}
	});

	var ItemView = Backbone.View.extend(
	{
		events : {},
		render : function(){
		this.$el.html(this.model.toJSON());
		return this;
		}
	});


	//Reuse the view as a sub-view
	var ListView = Backbone.View.extend(
	{
		render: function(){
			var items = this.model.get('items');
			_.each(items, function(item){
				var itemview = new ItemView({ model : item });
				this.$el.append(itemview.render().el);
			}, 
			this
			); 
		}
	}
);

//****** Bind an event on the change function to rerender the view.

var TodoView = Backbone.View.extend({
	initialize: function () {
		this.model.bind('change',_.bind(this.render,this));
	}
});

//****** Model.Collection
var ToDo = Backbone.Model.extend({
	defaults : {
		title : '',
		completed : false
	}
});
var ToDoCollection = Backbone.Collection.extend({
	model:ToDo
});

//var myitem = new ToDo({ title:'welcome', id:'2'});
//var todos = new ToDoCollection([myitem]);
//console.log("the lenght of the collection is :" + todos.length);

var a = new ToDo({ title: 'first variable'}),
	b = new ToDo({ title: 'second variable'}),
	c = new ToDo({ title: 'third variable'});

var todos1 = new ToDoCollection([a,b]);
	console.log('collection size now is:' + todos1.length);
	todos1.add(c);
	todos1.remove([a,b,c]);
	console.log("the lenght of the collection is :" + todos1.length);

//******

var TodDosCollection = new Backbone.Collection();

	TodDosCollection.on("add", function(todo){
	console.log("I should " + todo.get("title") + ". Have I done it before? " + (todo.get("completed") ? 'Yeah!': 'No.' ));
	});

	TodosCollection.add([
		{ title: 'go to Jamaica', completed: false },
		{ title: 'go to China', completed: false },
		{ title: 'go to Disneyland', completed: true }
	]);



//***

var TodDosCollection1 = new Backbone.Collection();
	TodDosCollection1.on("change", function(model){
	console.log();
	});



		

TodDosCollection.add([]);



</script>
</body>
</html>